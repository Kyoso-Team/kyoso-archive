import { fetchUserData, id } from './utils';
import { createSpinner } from 'nanospinner';
import type { PostgresJsDatabase } from 'drizzle-orm/postgres-js';
import type { Client as OsuClient } from 'osu-web.js';

export async function seedUsers(
  db: PostgresJsDatabase,
  osuClient: OsuClient,
  discordBotToken: string
) {
  console.log('');
  let spinner = createSpinner('Seed users').start();
  // Feel free to add more users
  let ids = [
    id(8203119, '443192613621858304'),
    id(9676089, '321933284114300928'),
    id(6231292, '308083236071014402'),
    id(12058601, '194198021829951489'),
    id(1797189, '125419051290853376'),
    id(15173398, '336333475814703104'),
    id(14112951, '331031326688018432'),
    id(7279762, '196497984580616193'),
    id(10000899, '250693235091963904'),
    id(2756335, '369469339083997185'),
    id(1576095, '823764250304446504'),
    id(9918921, '296804750295302145'),
    id(808976, '425247127346741250'),
    id(13352562, '842179503408414781'),
    id(14271017, '201007982060765184'),
    id(8599070, '126806732889522176'),
    id(3958619, '185648818111512576'),
    id(20971891, '452410682214842368'),
    id(12455868, '345003515594276865'),
    id(7892873, '203153128940371968'),
    id(17980099, '244886511370240001'),
    id(21728944, '248893859126312960'),
    id(14356517, '621923547798962177'),
    id(9433144, '177799252951564288'),
    id(15229290, '587825148267331594'),
    id(3372322, '121310011778531331'),
    id(18618027, '311157082973798400'),
    id(1013605, '556857604060479489'),
    id(8240995, '142725947760574464'),
    id(13968504, '671166695116898314'),
    id(6968364, '134285412498669568'),
    id(25512851, '606853872413048852'),
    id(16834515, '544302017376550923'),
    id(18365259, '846755445745123338'),
    id(15899307, '381439606010150913'),
    id(7671790, '150313781673721856'),
    id(9188548, '108904078351814656'),
    id(16060432, '345670350773813250'),
    id(1997719, '121440769331560459'),
    id(18315188, '133345027660316673'),
    id(12835025, '332601750169321483'),
    id(9808432, '238751195345190913'),
    id(16052525, '197089152074907648'),
    id(8406711, '274919681809186817'),
    id(11364009, '330540904349696000'),
    id(3191010, '258709654366978049'),
    id(17100083, '351147827289653249'),
    id(12754827, '346046056703721482'),
    id(9501251, '140893290647126017'),
    id(13684009, '183552082681266176')
  ];

  await fetchUserData(ids, db, osuClient, discordBotToken);
  spinner.success();

  return ids.length;
}
